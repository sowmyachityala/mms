<div class="sm:inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent">
    <!-- <fuse-alert [appearance]="'soft'" class="w-full z-10 fixed" [dismissible]="true" [dismissed]="false"
        [name]="'assignAlert'" [type]="'success'">
        <span fuseAlertTitle>Success</span>
        {{assignText}}
    </fuse-alert> -->
    <div class="page-title justify-between flex">
        Sub Categories
        <div class="page-sub-title">
            <a class="mr-1 text-xl">{{ subCategories?.length }}</a>
            <span class="float-right"> total Sub Categories </span>
        </div>
    </div>

    <div class=" flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between pb-4 px-6 md:px-4">
        <div class="absolute inset-x-0 bottom-0" *ngIf="isLoading">
            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        </div>
        <div class="">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
                <mat-label>Search</mat-label>
                <mat-icon matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                <input matInput [formControl]="searchInputControl" (keyup)="applyFilter($event.target.value)"
                    [autocomplete]="'off'" [placeholder]="'Search'">
            </mat-form-field>
            <!-- <mat-form-field class="fuse-mat-dense fuse-mat-rounded min-w-64" [subscriptSizing]="'dynamic'">
                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                <input matInput [formControl]="searchInputControl" [autocomplete]="'off'"
                    [placeholder]="'Search mosques'">
            </mat-form-field> -->
        </div>
        <div class="flex shrink-0 items-center mt-6 sm:mt-0">
            <button mat-flat-button>
                <mat-icon prefix [svgIcon]="'filter_list'" [color]="'primary'"></mat-icon>
                <span class="ml-2 mr-1">Filters</span>
            </button>
            <ng-container>
                <button mat-flat-button [color]="'primary'" (click)="addSubCategory()">
                    <span class="ml-2 mr-1">Add </span>
                </button>
            </ng-container>
        </div>
    </div>
    <div class="flex flex-auto overflow-hidden">
        <div class="flex flex-col flex-auto overflow-hidden sm:overflow-y-auto sm:justify-between px-6 md:px-4">
            <table mat-table [dataSource]="dataSource">

                <ng-container matColumnDef="categoryName">
                    <th mat-header-cell *matHeaderCellDef> Category Name </th>
                    <td mat-cell *matCellDef="let element" class="active">
                        {{element.categoryName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="subCategoryName">
                    <th mat-header-cell *matHeaderCellDef>Sub Category Name </th>
                    <td mat-cell *matCellDef="let element" class="active">
                        {{element.subCategoryName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="subCategoryDescription">
                    <th mat-header-cell *matHeaderCellDef>Sub Category Description </th>
                    <td mat-cell *matCellDef="let element">
                        {{element?.subCategoryDescription}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="createdOn">
                    <th mat-header-cell *matHeaderCellDef> Created Date </th>
                    <td mat-cell *matCellDef="let element">
                        <div> {{element.createdOn | date:'dd/MM/yyyy'}} </div>
                        <div class="text-sm text-disabled"> {{element?.createdOn | date:'shortTime'}} </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="isActive">
                    <th mat-header-cell *matHeaderCellDef> Status </th>
                    <td mat-cell *matCellDef="let element">
                        <span class="flex cursor-pointer" (click)="assignAdmin(element)">
                            <img class="w-4 h-4 mt-1"
                                [ngClass]="direction === 'ltr' ? 'mr-1 ' : direction === 'rtl' ? 'ml-1' :''"
                                [src]="element?.isActive === false ? imageEndPoints?.deactive : imageEndPoints?.activeIcon">
                            <span
                                [ngClass]="element?.isActive === false ? '' : element.isActive ? 'active' :''">{{element.isActive
                                ? 'Active' : 'Inactive'}}</span>
                        </span>

                    </td>
                </ng-container>

                <ng-container matColumnDef="mosqueEmail">
                    <th mat-header-cell *matHeaderCellDef> Email ID </th>
                    <td mat-cell *matCellDef="let element">
                        <a href="mailto:{{ element.mosqueEmail }}"> {{element.mosqueEmail}}</a>
                    </td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let element" class="pr-0 pl-0 w-4">
                        <!-- Add a button to trigger the menu -->
                        <button style="padding-right: revert;" [matMenuTriggerFor]="menu">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <!-- Define the menu -->
                        <mat-menu #menu="matMenu"
                            [ngClass]="direction === 'ltr' ? 'left-4 ' : direction === 'rtl' ? 'right-4' :''">
                            <!-- <ng-container *ngFor="let action of currentActions?.childMenuActions"> -->
                            <!-- <button mat-menu-item (click)="assignAdmin(element)" *ngIf="element?.isActive "> -->
                                <!-- && action?.actionNameId === 'Assign' -->
                                <!-- </button> -->
                            <button mat-menu-item (click)="editCategory(element)">Edit Category</button>
                            <button mat-menu-item (click)="addSubCategory(element)">Add Sub Category</button>
                            <!-- *ngIf="action?.actionNameId === 'Edit'" -->
                            <button mat-menu-item (click)="confirmDeactiveCategory(element)" *ngIf="element?.isActive"
                                class="text-danger">
                                <!-- && action?.actionNameId === 'Deactivate' -->
                                <span class="text-danger"> Deactivate </span>
                            </button>
                            
                            <!-- </ng-container> -->
                        </mat-menu>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching</td>
                </tr>
            </table>
            <mat-paginator style-paginator [length]="pageLength" [pageSize]="pageSize" [showTotalPages]="3"
                showFirstLastButtons [pageSizeOptions]="[10,20, 50]" (page)="pageChangeEvent($event)">
            </mat-paginator>
        </div>
    </div>
</div>