<div
    mat-dialog-title
    class="flex justify-between bgGreen text-white py-4 px-8  {{ direction }}"
>
    <h1 class="font-semibold">
        {{ "Donations.cTransactionHistory" | translate }}
    </h1>
    <span class="flex font-semibold cursor-pointer" (click)="onClose()"
        ><mat-icon class="text-white">close</mat-icon>
        <span class="mt-0.5"> {{ "Donations.cclose" | translate }}</span>
    </span>
</div>
<div mat-dialog-content class="px-8 pt-8">
    <!-- <div class="page-title justify-between flex">
        <div>
            Transaction History <span>( <span class="active">{{ totalTxAmount }}</span> SAR)</span>
        </div>
        <div class="page-sub-title">
            <a class="mr-1 text-xl">{{ pageLength }}</a>
            <span class="float-right"> total transactions </span>
        </div>
    </div> -->
    <div class="flex flex-col shadow bg-card mb-1">
        <div class="container">
            <div
                style="background: #ecfaff; height: 300px"
                class="flex justify-between pr-24 pl-24"
            >
                <div class="pt-15 pb-15 text-center">
                    <div>
                        <div
                            class="text-3xl font-semibold uppercase text-[#808080]"
                        >
                            {{ "Donations.yourTotalDonations" | translate }}
                        </div>
                    </div>
                    <div class="mt-6 text-2xl">
                        <span class="text-7xl mt-1 font-medium">
                            {{ totalTxAmount }}
                            <span class="">{{ userCurrency }}</span>
                        </span>
                    </div>
                    <div>
                        <div class="text-xl text-[#808080]">
                            <span class="active font-semibold">{{
                                pageLength
                            }}</span>
                            {{ "Donations.transactions" | translate }}
                        </div>
                    </div>
                    <button
                        class="mt-1"
                        mat-flat-button
                        [color]="'primary'"
                        (click)="onDonateNow()"
                    >
                        {{ "Dashboard.donateNow" | translate }}
                    </button>
                </div>
                <img
                    class="donation-cover mt-6 mb-6"
                    [src]="imageEndPoints.donation_mosque"
                    alt="Cover image"
                />
            </div>
        </div>
    </div>
    <!-- <hr> -->
    <div class="absolute inset-x-0 bottom-0" *ngIf="isLoading">
        <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
    </div>
    <table mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.transactionId" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">{{ element.id }}</td>
        </ng-container>

        <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.payeeName" | translate }}
            </th>
            <td
                mat-cell
                *matCellDef="let element"
                matTooltip="Info about the action"
            >
                {{ element?.fullName }}
            </td>
        </ng-container>
        <ng-container matColumnDef="phoneNumber">
            <th mat-header-cell *matHeaderCellDef>
                Phone Number
            </th>
            <td
                mat-cell
                *matCellDef="let element"
                matTooltip="Info about the action"
            >
                {{ element?.phoneNumber }}
            </td>
        </ng-container>
        <ng-container matColumnDef="payerEmail">
            <th mat-header-cell *matHeaderCellDef>
                Payer Email
            </th>
            <td
                mat-cell
                *matCellDef="let element"
                matTooltip="Info about the action"
            >
                {{ element?.payerEmail }}
            </td>
        </ng-container>

        <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef class="text-end">
                {{ "Donations.donatedAmount" | translate }}
            </th>
            <td mat-cell *matCellDef="let element" class="text-end">
                {{ element?.amount }}
            </td>
        </ng-container>

        <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.description" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element?.description }}
            </td>
        </ng-container>

        <!-- <ng-container matColumnDef="ip">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.ipAddress" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element?.ip }}
            </td>
        </ng-container> -->

        <ng-container matColumnDef="paidAt">
            <th mat-header-cell *matHeaderCellDef class="text-end">
                {{ "Donations.transactionDate" | translate }}
            </th>
            <td mat-cell *matCellDef="let element" class="text-end">
                <div>{{ element?.paidAt | date : "dd/MM/yyyy" }}</div>
                <div class="text-sm text-disabled">
                    {{ element?.paidAt | date : "shortTime" }}
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="currency">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.currency" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.currency }}
            </td>
        </ng-container>

        <!-- <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.paymentType" | translate }}
            </th>
            <td mat-cell *matCellDef="let element" class="uppercase">
                {{ element?.source?.type }}
            </td>
        </ng-container> -->
        <!-- <ng-container matColumnDef="cardNumber">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.cardNumber" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element?.source?.number }}
            </td>
        </ng-container> -->
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>
                {{ "Donations.status" | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                <!-- {{element.status}} -->
                <span class="flex">
                    <img
                        class="w-4 h-4 mt-1"
                        [ngClass]="
                            direction === 'ltr'
                                ? 'mr-1 '
                                : direction === 'rtl'
                                ? 'ml-1'
                                : ''
                        "
                        [src]="
                            element?.status === 'failed'
                                ? imageEndPoints?.deactive
                                : imageEndPoints?.activeIcon
                        "
                    />
                    <span
                        [ngClass]="
                            element?.status === 'failed'
                                ? 'text-danger'
                                : element?.status === 'paid'
                                ? 'active'
                                : ''
                        "
                        >{{
                            element?.status === "PAID" ? "Success" : "Failed"
                        }}</span
                    >
                </span>
            </td>
        </ng-container>

        <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
        ></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">
                {{ "Donations.noDataMatching" | translate }}
            </td>
        </tr>
    </table>
    <mat-paginator
        style-paginator
        [length]="pageLength"
        [pageSize]="pageSize"
        [showTotalPages]="3"
        showFirstLastButtons
        [pageSizeOptions]="[10, 20, 50]"
    >
    </mat-paginator>
</div>
